<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="fr">
<head>
    <meta charset="utf-8"/>
    <title>Tableau de bord</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="/css/styles.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand fw-semibold" href="/">Poseiden</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
                aria-controls="mainNav" aria-expanded="false" aria-label="Basculer la navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="mainNav" class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">

                <li class="nav-item" sec:authorize="!isAuthenticated()">
                    <a class="nav-link" href="/app/login">Connexion</a>
                </li>
                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <span class="navbar-text me-2" sec:authentication="name"></span>
                </li>

                <li class="nav-item" sec:authorize="hasRole('ADMIN')">
                    <a class="nav-link" href="/user/list">Utilisateurs</a>
                </li>

                <li class="nav-item ms-2" sec:authorize="isAuthenticated()">
                    <form th:action="@{/logout}" method="post" class="d-inline">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                        <button type="submit" class="btn btn-outline-light btn-sm">Déconnexion</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</nav>

<header class="bg-white border-bottom">
    <div class="container py-4">
        <h1 class="h3 mb-1">Tableau de bord</h1>
        <p class="text-muted mb-0">Accédez rapidement à toutes les sections de l’application.</p>
    </div>
</header>

<main class="container my-4">
    <div class="row g-3">

       


        <div class="col-12 col-md-6 col-lg-4" sec:authorize="hasRole('ADMIN')">
            <a href="/user/list" class="text-decoration-none">
                <div class="card h-100 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title mb-1">Utilisateurs</h5>
                        <p class="card-text text-muted">Gérer les comptes et rôles.</p>
                        <span class="badge text-bg-secondary">/user/list</span>
                    </div>
                </div>
            </a>
        </div>


        <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title mb-1">Enchères</h5>
                    <p class="card-text text-muted">Accédez aux ordres d'achat : liste, ajout et mise à jour.</p>
                    <span class="badge text-bg-success">/bidList/*</span>

                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <a href="/bidList/list" class="btn btn-outline-success btn-sm">Voir la liste</a>
                        <a href="/bidList/add" class="btn btn-success btn-sm">Ajouter</a>
                        <button class="btn btn-primary btn-sm" type="button"
                                data-bs-toggle="collapse" data-bs-target="#bidUpdateCollapse"
                                aria-expanded="false" aria-controls="bidUpdateCollapse">
                            Mettre à jour…
                        </button>
                    </div>

                    <div id="bidUpdateCollapse" class="collapse mt-3">
                        <form class="row g-2 align-items-center"
                              onsubmit="event.preventDefault(); const id=this.querySelector('#bidUpdateId').value; if(id){ window.location.href='/bidList/update/'+id; }">
                            <div class="col-8">
                                <label for="bidUpdateId" class="visually-hidden">ID de l’enchère</label>
                                <input id="bidUpdateId" name="id" type="number" min="1" class="form-control form-control-sm"
                                       placeholder="ID de l’enchère à modifier" required>
                            </div>
                            <div class="col-4 d-grid">
                                <button type="submit" class="btn btn-primary btn-sm">Aller</button>
                            </div>
                            <div class="col-12">
                                <small class="text-muted">Saisissez l’ID puis validez pour ouvrir la page de mise à jour.</small>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>


        <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title mb-1">Points de courbe</h5>
                    <p class="card-text text-muted">Liste, ajout et mise à jour des points.</p>
                    <span class="badge text-bg-info">/curvePoint/*</span>

                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <a href="/curvePoint/list" class="btn btn-outline-info btn-sm">Voir la liste</a>
                        <a href="/curvePoint/add" class="btn btn-info btn-sm text-white">Ajouter</a>
                        <button class="btn btn-primary btn-sm" type="button"
                                data-bs-toggle="collapse" data-bs-target="#curveUpdateCollapse"
                                aria-expanded="false" aria-controls="curveUpdateCollapse">
                            Mettre à jour…
                        </button>
                    </div>

                    <div id="curveUpdateCollapse" class="collapse mt-3">
                        <form class="row g-2 align-items-center"
                              onsubmit="event.preventDefault(); const id=this.querySelector('#curveUpdateId').value; if(id){ window.location.href='/curvePoint/update/'+id; }">
                            <div class="col-8">
                                <label for="curveUpdateId" class="visually-hidden">ID du point</label>
                                <input id="curveUpdateId" name="id" type="number" min="1" class="form-control form-control-sm"
                                       placeholder="ID du point à modifier" required>
                            </div>
                            <div class="col-4 d-grid">
                                <button type="submit" class="btn btn-primary btn-sm">Aller</button>
                            </div>
                            <div class="col-12">
                                <small class="text-muted">Entrez l’ID du point puis validez.</small>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notations -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title mb-1">Notations</h5>
                    <p class="card-text text-muted">Liste, ajout et mise à jour des notations.</p>
                    <span class="badge text-bg-warning">/rating/*</span>

                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <a href="/rating/list" class="btn btn-outline-warning btn-sm">Voir la liste</a>
                        <a href="/rating/add" class="btn btn-warning btn-sm text-dark">Ajouter</a>
                        <button class="btn btn-primary btn-sm" type="button"
                                data-bs-toggle="collapse" data-bs-target="#ratingUpdateCollapse"
                                aria-expanded="false" aria-controls="ratingUpdateCollapse">
                            Mettre à jour…
                        </button>
                    </div>

                    <div id="ratingUpdateCollapse" class="collapse mt-3">
                        <form class="row g-2 align-items-center"
                              onsubmit="event.preventDefault(); const id=this.querySelector('#ratingUpdateId').value; if(id){ window.location.href='/rating/update/'+id; }">
                            <div class="col-8">
                                <label for="ratingUpdateId" class="visually-hidden">ID de la notation</label>
                                <input id="ratingUpdateId" name="id" type="number" min="1" class="form-control form-control-sm"
                                       placeholder="ID de la notation à modifier" required>
                            </div>
                            <div class="col-4 d-grid">
                                <button type="submit" class="btn btn-primary btn-sm">Aller</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trades (enrichi: Liste / Ajouter / Mise à jour par ID) -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title mb-1">Trades</h5>
                    <p class="card-text text-muted">Liste, ajout et mise à jour des transactions.</p>
                    <span class="badge text-bg-danger">/trade/*</span>

                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <a href="/trade/list" class="btn btn-outline-danger btn-sm">Voir la liste</a>
                        <a href="/trade/add" class="btn btn-danger btn-sm">Ajouter</a>
                        <button class="btn btn-primary btn-sm" type="button"
                                data-bs-toggle="collapse" data-bs-target="#tradeUpdateCollapse"
                                aria-expanded="false" aria-controls="tradeUpdateCollapse">
                            Mettre à jour…
                        </button>
                    </div>

                    <div id="tradeUpdateCollapse" class="collapse mt-3">
                        <form class="row g-2 align-items-center"
                              onsubmit="event.preventDefault(); const id=this.querySelector('#tradeUpdateId').value; if(id){ window.location.href='/trade/update/'+id; }">
                            <div class="col-8">
                                <label for="tradeUpdateId" class="visually-hidden">ID du trade</label>
                                <input id="tradeUpdateId" name="id" type="number" min="1" class="form-control form-control-sm"
                                       placeholder="ID du trade à modifier" required>
                            </div>
                            <div class="col-4 d-grid">
                                <button type="submit" class="btn btn-primary btn-sm">Aller</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Règles -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title mb-1">Règles</h5>
                    <p class="card-text text-muted">Liste, ajout et mise à jour des règles.</p>
                    <span class="badge text-bg-dark">/ruleName/*</span>

                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <a href="/ruleName/list" class="btn btn-outline-dark btn-sm">Voir la liste</a>
                        <a href="/ruleName/add" class="btn btn-dark btn-sm">Ajouter</a>
                        <button class="btn btn-primary btn-sm" type="button"
                                data-bs-toggle="collapse" data-bs-target="#ruleUpdateCollapse"
                                aria-expanded="false" aria-controls="ruleUpdateCollapse">
                            Mettre à jour…
                        </button>
                    </div>

                    <div id="ruleUpdateCollapse" class="collapse mt-3">
                        <form class="row g-2 align-items-center"
                              onsubmit="event.preventDefault(); const id=this.querySelector('#ruleUpdateId').value; if(id){ window.location.href='/ruleName/update/'+id; }">
                            <div class="col-8">
                                <label for="ruleUpdateId" class="visually-hidden">ID de la règle</label>
                                <input id="ruleUpdateId" name="id" type="number" min="1" class="form-control form-control-sm"
                                       placeholder="ID de la règle à modifier" required>
                            </div>
                            <div class="col-4 d-grid">
                                <button type="submit" class="btn btn-primary btn-sm">Aller</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>
</main>

<footer class="text-center text-muted py-4">
    <small>&copy; <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2026</span> - Poseiden</small>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>